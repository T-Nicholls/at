
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>at.load.madx &#8212; Accelerator Toolbox 0.4.1 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!-- 
    this give us a css class that will be invisible only if js is disabled 
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom_at.css?v=bc6ab313" />
  
  <!-- So that users can add custom icons -->
  <script src="../../_static/scripts/fontawesome.js?digest=26a4bc78f4c0ddb94549"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549" />

    <script src="../../_static/documentation_options.js?v=11bb8181"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=fd10adb8"></script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'p/api/at.load.madx';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="at.lattice" href="at.lattice.html" />
    <link rel="prev" title="Collective" href="../howto/Collective.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="0.4" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/AT.png" class="logo__image only-light" alt="Accelerator Toolbox 0.4.1 documentation - Home"/>
    <img src="../../_static/AT.png" class="logo__image only-dark pst-js-only" alt="Accelerator Toolbox 0.4.1 documentation - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../common/indx.html">
    AT basics
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../index.html">
    Python
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../m/index.html">
    Matlab
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/atcollab/at" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../common/indx.html">
    AT basics
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../index.html">
    Python
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../m/index.html">
    Matlab
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/atcollab/at" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><p aria-level="2" class="caption" role="heading"><span class="caption-text">Guides:</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../howto/Installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howto/Primer.html">PyAT Primer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks/variables.html">Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks/observables.html">Observables</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">How to:</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../howto/multiprocessing.html">Parallel processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howto/CavityControl.html">Cavity Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howto/Collective.html">Collective</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Working with MAD-X files</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Packages:</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="at.lattice.html">at.lattice</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="at.lattice.axisdef.html">at.lattice.axisdef</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.lattice.cavity_access.html">at.lattice.cavity_access</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.lattice.deprecated.html">at.lattice.deprecated</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.lattice.elements.html">at.lattice.elements</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.lattice.idtable_element.html">at.lattice.idtable_element</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.lattice.lattice_object.html">at.lattice.lattice_object</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.lattice.lattice_variables.html">at.lattice.lattice_variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.lattice.options.html">at.lattice.options</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.lattice.particle_object.html">at.lattice.particle_object</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.lattice.rectangular_bend.html">at.lattice.rectangular_bend</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.lattice.utils.html">at.lattice.utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.lattice.variable_elements.html">at.lattice.variable_elements</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.lattice.variables.html">at.lattice.variables</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="at.latticetools.html">at.latticetools</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="at.latticetools.observablelist.html">at.latticetools.observablelist</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.latticetools.observables.html">at.latticetools.observables</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="at.tracking.html">at.tracking</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="at.tracking.atpass.html">at.tracking.atpass</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.tracking.deprecated.html">at.tracking.deprecated</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.tracking.particles.html">at.tracking.particles</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.tracking.track.html">at.tracking.track</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.tracking.utils.html">at.tracking.utils</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="at.physics.html">at.physics</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="at.physics.amat.html">at.physics.amat</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.physics.diffmatrix.html">at.physics.diffmatrix</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.physics.energy_loss.html">at.physics.energy_loss</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.physics.fastring.html">at.physics.fastring</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.physics.frequency_maps.html">at.physics.frequency_maps</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.physics.harmonic_analysis.html">at.physics.harmonic_analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.physics.linear.html">at.physics.linear</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.physics.magnet_tools.html">at.physics.magnet_tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.physics.matrix.html">at.physics.matrix</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.physics.nonlinear.html">at.physics.nonlinear</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.physics.orbit.html">at.physics.orbit</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.physics.radiation.html">at.physics.radiation</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.physics.revolution.html">at.physics.revolution</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.physics.ring_parameters.html">at.physics.ring_parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.physics.wiggdiffmatrix.html">at.physics.wiggdiffmatrix</a></li>
</ul>
</details></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="at.load.html">at.load</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="at.load.allfiles.html">at.load.allfiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.load.elegant.html">at.load.elegant</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.load.file_input.html">at.load.file_input</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.load.file_output.html">at.load.file_output</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.load.json.html">at.load.json</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.load.mad8.html">at.load.mad8</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">at.load.madx</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.load.matfile.html">at.load.matfile</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.load.reprfile.html">at.load.reprfile</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.load.rpn.html">at.load.rpn</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.load.tracy.html">at.load.tracy</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.load.utils.html">at.load.utils</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="at.matching.html">at.matching</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="at.matching.globalfit.html">at.matching.globalfit</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.matching.matching.html">at.matching.matching</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="at.acceptance.html">at.acceptance</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="at.acceptance.acceptance.html">at.acceptance.acceptance</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.acceptance.boundary.html">at.acceptance.boundary</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.acceptance.touschek.html">at.acceptance.touschek</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="at.collective.html">at.collective</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="at.collective.beam_loading.html">at.collective.beam_loading</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.collective.haissinski.html">at.collective.haissinski</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.collective.wake_elements.html">at.collective.wake_elements</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.collective.wake_functions.html">at.collective.wake_functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.collective.wake_object.html">at.collective.wake_object</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="at.plot.html">at.plot</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="at.plot.generic.html">at.plot.generic</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.plot.resonances.html">at.plot.resonances</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.plot.specific.html">at.plot.specific</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.plot.standalone.html">at.plot.standalone</a></li>
<li class="toctree-l2"><a class="reference internal" href="at.plot.synopt.html">at.plot.synopt</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="at.constants.html">at.constants</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../index.html" class="nav-link">Welcome to pyAT’s documentation!</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">at.load.madx</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="module-at.load.madx">
<span id="at-load-madx"></span><h1>at.load.madx<a class="headerlink" href="#module-at.load.madx" title="Link to this heading">#</a></h1>
<section id="using-mad-x-files-with-pyat">
<h2>Using <a class="reference external" href="https://mad.web.cern.ch/mad/webguide/manual.html">MAD-X</a> files with PyAT<a class="headerlink" href="#using-mad-x-files-with-pyat" title="Link to this heading">#</a></h2>
<p>PyAT can read lattice descriptions in Mad-X format (.seq files), and can export
lattices in MAD-X format.</p>
<p>However, because of intrinsic differences between PyAT and MAD-X, some
incompatibilities must be taken into account.</p>
<section id="translation-losses">
<h3>1. Translation losses<a class="headerlink" href="#translation-losses" title="Link to this heading">#</a></h3>
<section id="d-motion">
<h4>6-D motion<a class="headerlink" href="#d-motion" title="Link to this heading">#</a></h4>
<p>While AT allows setting 6-D motion and synchrotron radiation on individual elements,
MAD has a global setting for the whole lattice. When reading a MAD-X lattice without
radiation, 6-D motion in the resulting AT lattice is turned off, including in RF
cavities. If the MAD-X lattice has radiation on, 6-D motion is activated on the AT
lattice according to default settings (RF cavities active, radiation in dipoles,
quadrupoles and wigglers).</p>
</section>
<section id="combined-function-magnets">
<h4>Combined function magnets<a class="headerlink" href="#combined-function-magnets" title="Link to this heading">#</a></h4>
<p>MAD has little support for combined function magnets. When exporting a lattice in MAD
format, the main field component for each magnet class in kept but other components
disappear, except in the few cases handled by MAD (quadrupole and sextupole
components in <code class="docutils literal notranslate"><span class="pre">SBEND</span></code> or <code class="docutils literal notranslate"><span class="pre">RBEND</span></code>, skew quad component in <code class="docutils literal notranslate"><span class="pre">QUADRUPOLE</span></code>, see the
MAD user’s reference manual for more).</p>
</section>
<section id="multipoles">
<h4>Multipoles<a class="headerlink" href="#multipoles" title="Link to this heading">#</a></h4>
<p>MAD has no thick multipoles. Multipoles in MAD format (<code class="docutils literal notranslate"><span class="pre">MULTIPOLE</span></code> element) are
interpreted as <a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.ThinMultipole" title="at.lattice.elements.ThinMultipole"><code class="xref py py-class docutils literal notranslate"><span class="pre">ThinMultipole</span></code></a> elements. In the other direction, an AT
<a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Multipole" title="at.lattice.elements.Multipole"><code class="xref py py-class docutils literal notranslate"><span class="pre">Multipole</span></code></a> is converted to a thin <code class="docutils literal notranslate"><span class="pre">MULTIPOLE</span></code> surrounded by two
drift spaces.</p>
</section>
<section id="mad-elements-absent-from-at">
<h4>MAD elements absent from AT<a class="headerlink" href="#mad-elements-absent-from-at" title="Link to this heading">#</a></h4>
<p>Many MAD elements have no equivalent in AT. They are replaced by
<a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Marker" title="at.lattice.elements.Marker"><code class="xref py py-class docutils literal notranslate"><span class="pre">Marker</span></code></a> or <a class="reference internal" href="at.lattice.elements.html#at.lattice.elements.Drift" title="at.lattice.elements.Drift"><code class="xref py py-class docutils literal notranslate"><span class="pre">Drift</span></code></a> elements, depending on their length.</p>
</section>
<section id="incompatible-attributes">
<h4>Incompatible attributes<a class="headerlink" href="#incompatible-attributes" title="Link to this heading">#</a></h4>
<p>Some AT element attributes have no MAD equivalent, and vice versa.</p>
<p>When exporting to a MAD-X file:</p>
<ul class="simple">
<li><p><cite>NumIntSteps</cite>, <cite>MaxOrder</cite> are discarded,</p></li>
<li><p><cite>FringeBendEntrance</cite>, <cite>FringeBendExit</cite>, <cite>FringeQuadEntrance</cite>, <cite>FringeQuadExit</cite> are
discarded,</p></li>
<li><p><cite>R1</cite>, <cite>R2</cite>, <cite>T1</cite>, <cite>T2</cite> are discarded,</p></li>
<li><p><cite>RApertures</cite>, <cite>EApertures</cite> are discarded.</p></li>
</ul>
<p>When reading a MAD-X file:</p>
<ul class="simple">
<li><p><cite>TILT</cite> is interpreted and converted to <cite>R1</cite> and <cite>R2</cite> attributes,</p></li>
<li><p><cite>KTAP</cite> is interpreted and converted to <cite>FieldScaling</cite>.</p></li>
</ul>
</section>
</section>
<section id="reading-mad-x-files">
<span id="using-mad-x-files"></span><h3>2. Reading MAD-X files<a class="headerlink" href="#reading-mad-x-files" title="Link to this heading">#</a></h3>
<section id="short-way">
<h4>Short way<a class="headerlink" href="#short-way" title="Link to this heading">#</a></h4>
<p>The <a class="reference internal" href="#at.load.madx.load_madx" title="at.load.madx.load_madx"><code class="xref py py-func docutils literal notranslate"><span class="pre">load_madx()</span></code></a> function created a <a class="reference internal" href="at.lattice.lattice_object.html#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><code class="xref py py-class docutils literal notranslate"><span class="pre">Lattice</span></code></a> from a <code class="docutils literal notranslate"><span class="pre">LINE</span></code> or
<code class="docutils literal notranslate"><span class="pre">SEQUENCE</span></code> in a MAD-X file.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ring</span> <span class="o">=</span> <span class="n">at</span><span class="o">.</span><span class="n">load_madx</span><span class="p">(</span><span class="s2">&quot;lattice.seq&quot;</span><span class="p">,</span> <span class="n">use</span><span class="o">=</span><span class="s2">&quot;PS&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">ring</span><span class="p">)</span>
<span class="go">Lattice(&lt;1295 elements&gt;, name=&#39;PS&#39;, energy=1000000000.0, particle=Particle(&#39;positron&#39;),</span>
<span class="go">periodicity=1, harmonic_number=0, beam_current=0.0, nbunch=1, use=&#39;PS&#39;)</span>
</pre></div>
</div>
</section>
<section id="detailed-way">
<h4>Detailed way<a class="headerlink" href="#detailed-way" title="Link to this heading">#</a></h4>
<p><a class="reference internal" href="#at.load.madx.MadxParser" title="at.load.madx.MadxParser"><code class="xref py py-class docutils literal notranslate"><span class="pre">MadxParser</span></code></a> creates an empty database which can be populated with the
elements of a MAD-X file.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">parser</span> <span class="o">=</span> <span class="n">at</span><span class="o">.</span><span class="n">MadxParser</span><span class="p">()</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="#at.load.madx.MadxParser.parse_files" title="at.load.madx.MadxParser.parse_files"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MadxParser.parse_files()</span></code></a> method reads one or several MAD-X files and
populates the parser</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">parser</span><span class="o">.</span><span class="n">parse_files</span><span class="p">(</span><span class="s2">&quot;lattice.seq&quot;</span><span class="p">,</span> <span class="n">use</span><span class="o">=</span><span class="s2">&quot;PS&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The parser can be examined and modified using the standard python syntax:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">parser</span><span class="p">[</span><span class="s2">&quot;pr_bht91_f&quot;</span><span class="p">]</span>
<span class="go">sbend(name=PR.BHT91.F, l=2.1975925, angle=&#39;angle.prbhf&#39;, k1=&#39;k1prbhf+k1prpfwf-k1prf8l&#39;)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">parser</span><span class="p">[</span><span class="s2">&quot;angle.prbhf&quot;</span><span class="p">]</span>
<span class="go">0.03135884818</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">parser</span><span class="p">[</span><span class="s2">&quot;angle.prbhf&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.032</span>
</pre></div>
</div>
<p>All MAD parameters can be interactively modified and their last value will be taken
into account when generating a PyAT lattice.</p>
<p>The <a class="reference internal" href="#at.load.madx.MadxParser.lattice" title="at.load.madx.MadxParser.lattice"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MadxParser.lattice()</span></code></a> method creates a <a class="reference internal" href="at.lattice.lattice_object.html#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><code class="xref py py-class docutils literal notranslate"><span class="pre">Lattice</span></code></a> from a <code class="docutils literal notranslate"><span class="pre">LINE</span></code>
or <code class="docutils literal notranslate"><span class="pre">SEQUENCE</span></code> of the parser:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ring</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">lattice</span><span class="p">(</span><span class="n">use</span><span class="o">=</span><span class="s2">&quot;ps&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">ring</span><span class="p">)</span>
<span class="go">Lattice(&lt;1295 elements&gt;, name=&#39;PS&#39;, energy=1000000000.0, particle=Particle(&#39;positron&#39;),</span>
<span class="go">periodicity=1, harmonic_number=0, beam_current=0.0, nbunch=1, use=&#39;PS&#39;)</span>
</pre></div>
</div>
</section>
</section>
<section id="exporting-to-mad-x-files">
<h3>3. Exporting to MAD-X files<a class="headerlink" href="#exporting-to-mad-x-files" title="Link to this heading">#</a></h3>
<p>Exporting a PyAT lattice to a MAD-X files produces a single MAD <code class="docutils literal notranslate"><span class="pre">SEQUENCE</span></code> of
<code class="docutils literal notranslate"><span class="pre">LINE</span></code>.</p>
<p>See <a class="reference internal" href="#at.load.madx.save_madx" title="at.load.madx.save_madx"><code class="xref py py-func docutils literal notranslate"><span class="pre">save_madx()</span></code></a> for usage.</p>
</section>
<section id="functions-and-classes">
<h3>4. Functions and classes<a class="headerlink" href="#functions-and-classes" title="Link to this heading">#</a></h3>
</section>
</section>
<p class="rubric">Functions</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#at.load.madx.load_madx" title="at.load.madx.load_madx"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_madx</span></code></a>(*files[, use, strict, verbose])</p></td>
<td><p>Create a <a class="reference internal" href="at.lattice.lattice_object.html#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><code class="xref py py-class docutils literal notranslate"><span class="pre">Lattice</span></code></a> from MAD-X files</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at.load.madx.save_madx" title="at.load.madx.save_madx"><code class="xref py py-obj docutils literal notranslate"><span class="pre">save_madx</span></code></a>(ring[, filename])</p></td>
<td><p>Save a <a class="reference internal" href="at.lattice.lattice_object.html#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><code class="xref py py-class docutils literal notranslate"><span class="pre">Lattice</span></code></a> as a MAD-X file</p></td>
</tr>
</tbody>
</table>
</div>
<p class="rubric">Classes</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#at.load.madx.MadParameter" title="at.load.madx.MadParameter"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MadParameter</span></code></a>(parser, expr)</p></td>
<td><p>MAD parameter</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#at.load.madx.MadxParser" title="at.load.madx.MadxParser"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MadxParser</span></code></a>(**kwargs)</p></td>
<td><p>MAD-X specific parser</p></td>
</tr>
</tbody>
</table>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="at.load.madx.MadParameter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MadParameter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parser</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expr</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/at/load/madx.html#MadParameter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#at.load.madx.MadParameter" title="Link to this definition">#</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
<p>MAD parameter</p>
<p>A MAD parameter is an expression which can be evaluated n the context
of a MAD parser</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>parser</strong> – MadParser instance defining the context for evaluation</p></li>
<li><p><strong>expr</strong> – expression to be evaluated</p></li>
</ul>
</dd>
</dl>
<p>The expression may contain MAD parameter names, arithmetic operators and
mathematical functions known by MAD</p>
<dl class="py method">
<dt class="sig sig-object py" id="at.load.madx.MadParameter.evaluate">
<span class="sig-name descname"><span class="pre">evaluate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/at/load/madx.html#MadParameter.evaluate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#at.load.madx.MadParameter.evaluate" title="Link to this definition">#</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="at.load.madx.MadxParser">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">MadxParser</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/at/load/madx.html#MadxParser"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#at.load.madx.MadxParser" title="Link to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">_MadParser</span></code></p>
<p>MAD-X specific parser</p>
<p>The parser is a subclass of <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> and is database containing all the
MAD-X parameters and objects.</p>
<p class="rubric">Example</p>
<p>Parse a 1st file:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">parser</span> <span class="o">=</span> <span class="n">at</span><span class="o">.</span><span class="n">MadxParser</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">parser</span><span class="o">.</span><span class="n">parse_file</span><span class="p">(</span><span class="s2">&quot;file1&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Parse another file. This adds the new definitions to the database:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">parser</span><span class="o">.</span><span class="n">parse_file</span><span class="p">(</span><span class="s2">&quot;file2&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Look at the <em>rf_on</em> variable</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">parser</span><span class="p">[</span><span class="s2">&quot;rf_on&quot;</span><span class="p">]</span>
<span class="go">0</span>
</pre></div>
</div>
<p>Get the list of available sequences/lines:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">parser</span><span class="o">.</span><span class="n">sequences</span>
<span class="go">[&#39;arca&#39;,</span>
<span class="go"> &#39;arca_inj&#39;,</span>
<span class="go"> &#39;arcb_inj&#39;,</span>
<span class="go"> &#39;low_emit_ring&#39;,</span>
<span class="go"> &#39;arc_inj&#39;,</span>
<span class="go"> &#39;low_emit_ring_inj&#39;]</span>
</pre></div>
</div>
<p>Generate an AT <a class="reference internal" href="at.lattice.lattice_object.html#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><code class="xref py py-class docutils literal notranslate"><span class="pre">Lattice</span></code></a> from the <em>low_emit_ring</em> sequence</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ring1</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">lattice</span><span class="p">(</span><span class="n">use</span><span class="o">=</span><span class="s2">&quot;low_emit_ring&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Change the value of a variable:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">parser</span><span class="p">[</span><span class="s2">&quot;rf_on&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
</pre></div>
</div>
<p>Generate a new AT <a class="reference internal" href="at.lattice.lattice_object.html#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><code class="xref py py-class docutils literal notranslate"><span class="pre">Lattice</span></code></a> taking into account the new variables:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ring2</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">lattice</span><span class="p">(</span><span class="n">use</span><span class="o">=</span><span class="s2">&quot;low_emit_ring&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Generate an AT <a class="reference internal" href="at.lattice.lattice_object.html#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><code class="xref py py-class docutils literal notranslate"><span class="pre">Lattice</span></code></a> from another sequence:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">arca</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">lattice</span><span class="p">(</span><span class="n">use</span><span class="o">=</span><span class="s2">&quot;ring&quot;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>strict</strong> – If <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a>, assign 0 to undefined variables</p></li>
<li><p><strong>verbose</strong> – If <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, print details on the processing</p></li>
<li><p><strong>**kwargs</strong> – Initial variable definitions</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="at.load.madx.MadxParser.clear">
<span class="sig-name descname"><span class="pre">clear</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#at.load.madx.MadxParser.clear" title="Link to this definition">#</a></dt>
<dd><p>Clear the database: remove all parameters and objects</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.load.madx.MadxParser.evaluate">
<span class="sig-name descname"><span class="pre">evaluate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expr</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.load.madx.MadxParser.evaluate" title="Link to this definition">#</a></dt>
<dd><p>Evaluate the right side of an expression</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>expr</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – expression to evaluate</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>value</strong> – evaluated expression</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.load.madx.MadxParser.expand">
<span class="sig-name descname"><span class="pre">expand</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.load.madx.MadxParser.expand" title="Link to this definition">#</a></dt>
<dd><p>iterator over AT objects generated by a source object</p>
<dl class="field-list simple">
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.load.madx.MadxParser.lattice">
<span class="sig-name descname"><span class="pre">lattice</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">use</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ring'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.load.madx.MadxParser.lattice" title="Link to this definition">#</a></dt>
<dd><p>Create a lattice from the selected sequence</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>use</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Name of the MAD sequence or line containing the desired
lattice. Default: <code class="docutils literal notranslate"><span class="pre">ring</span></code></p>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Name of the lattice. Default: MAD sequence name.</p></li>
<li><p><strong>particle</strong> (<a class="reference internal" href="at.lattice.particle_object.html#at.lattice.particle_object.Particle" title="at.lattice.particle_object.Particle"><em>Particle</em></a>) – Circulating particle. Default: from MAD</p></li>
<li><p><strong>energy</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – Energy of the lattice [eV]. Default: from MAD</p></li>
<li><p><strong>periodicity</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a>) – Number of periods. Default: 1</p></li>
<li><p><strong>*</strong> – All other keywords will be set as Lattice attributes</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.load.madx.MadxParser.parse_files">
<span class="sig-name descname"><span class="pre">parse_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">filenames</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">final</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prolog</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">epilog</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.load.madx.MadxParser.parse_files" title="Link to this definition">#</a></dt>
<dd><p>Process files and fill the database</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>*filenames</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Files to process</p></li>
<li><p><strong>final</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – If <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, signals that the undefined variables may be set
to the default value</p></li>
<li><p><strong>prolog</strong> (<em>None</em><em> | </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em> | </em><em>Callable</em><em>[</em><em>...</em><em>, </em><em>None</em><em>]</em>)</p></li>
<li><p><strong>epilog</strong> (<em>Callable</em><em>[</em><em>...</em><em>, </em><em>None</em><em>] </em><em>| </em><em>None</em>)</p></li>
<li><p><strong>**kwargs</strong> – Initial variable definitions</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="at.load.madx.MadxParser.parse_lines">
<span class="sig-name descname"><span class="pre">parse_lines</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lines</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">final</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#at.load.madx.MadxParser.parse_lines" title="Link to this definition">#</a></dt>
<dd><p>Process input lines and fill the database</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lines</strong> (<a class="reference external" href="https://docs.python.org/3/library/collections.abc.html#collections.abc.Iterable" title="(in Python v3.13)"><em>Iterable</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em>]</em>) – Iterable of input lines</p></li>
<li><p><strong>final</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – If <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, signals that the undefined variables may be set
to the default value</p></li>
<li><p><strong>**kwargs</strong> – Initial variable definitions</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="at.load.madx.MadxParser.ignored">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ignored</span></span><a class="headerlink" href="#at.load.madx.MadxParser.ignored" title="Link to this definition">#</a></dt>
<dd><p>Set of ignored commands</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="at.load.madx.MadxParser.missing">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">missing</span></span><a class="headerlink" href="#at.load.madx.MadxParser.missing" title="Link to this definition">#</a></dt>
<dd><p>Set of missing definitions</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="at.load.madx.MadxParser.sequences">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">sequences</span></span><a class="headerlink" href="#at.load.madx.MadxParser.sequences" title="Link to this definition">#</a></dt>
<dd><p>List of available sequences or lines</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="at.load.madx.load_madx">
<span class="sig-name descname"><span class="pre">load_madx</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">files</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ring'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">strict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/at/load/madx.html#load_madx"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#at.load.madx.load_madx" title="Link to this definition">#</a></dt>
<dd><p>Create a <a class="reference internal" href="at.lattice.lattice_object.html#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><code class="xref py py-class docutils literal notranslate"><span class="pre">Lattice</span></code></a> from MAD-X files</p>
<ul class="simple">
<li><p>The <em>energy</em> and <em>particle</em> of the generated lattice are taken from the MAD-X
<code class="docutils literal notranslate"><span class="pre">BEAM</span></code> object, using the MAD-X default parameters: positrons at 1 Gev.
These parameters are overloaded by the value given in the <em>energy</em> and
<em>particle</em> keyword arguments.</p></li>
<li><p>The radiation state is given by the <code class="docutils literal notranslate"><span class="pre">RADIATE</span></code> flag of the <code class="docutils literal notranslate"><span class="pre">BEAM</span></code> object,
using the AT defaults: RF cavities active, synchrotron radiation in dipoles and
quadrupoles.</p></li>
<li><p>Long elements are split according to the default AT value of <em>NumIntSteps</em> (10).</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>files</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Names of one or several MAD-X files</p></li>
<li><p><strong>strict</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – If <a class="reference external" href="https://docs.python.org/3/library/constants.html#False" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">False</span></code></a>, assign 0 to undefined variables</p></li>
<li><p><strong>use</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Name of the MADX sequence or line containing the desired
lattice. Default: <code class="docutils literal notranslate"><span class="pre">ring</span></code></p></li>
<li><p><strong>verbose</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – If <a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.13)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">True</span></code></a>, print details on the processing</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) – Name of the lattice. Default: MADX sequence name.</p></li>
<li><p><strong>particle</strong> (<a class="reference internal" href="at.lattice.particle_object.html#at.lattice.particle_object.Particle" title="at.lattice.particle_object.Particle"><em>Particle</em></a>) – Circulating particle. Default: from MADX</p></li>
<li><p><strong>energy</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a>) – Energy of the lattice [eV]. Default: from MADX</p></li>
<li><p><strong>periodicity</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a>) – Number of periods. Default: 1</p></li>
<li><p><strong>*</strong> – Other keywords will be used as initial variable definitions</p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>lattice</strong> (<em>Lattice</em>) – New <a class="reference internal" href="at.lattice.lattice_object.html#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><code class="xref py py-class docutils literal notranslate"><span class="pre">Lattice</span></code></a> object</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="at.load.allfiles.html#at.load.allfiles.load_lattice" title="at.load.allfiles.load_lattice"><code class="xref py py-func docutils literal notranslate"><span class="pre">load_lattice()</span></code></a> for a generic lattice-loading function.</p>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="at.load.madx.save_madx">
<span class="sig-name descname"><span class="pre">save_madx</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ring</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/at/load/madx.html#save_madx"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#at.load.madx.save_madx" title="Link to this definition">#</a></dt>
<dd><p>Save a <a class="reference internal" href="at.lattice.lattice_object.html#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><code class="xref py py-class docutils literal notranslate"><span class="pre">Lattice</span></code></a> as a MAD-X file</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ring</strong> (<a class="reference internal" href="at.lattice.lattice_object.html#at.lattice.lattice_object.Lattice" title="at.lattice.lattice_object.Lattice"><em>Lattice</em></a>) – lattice</p></li>
<li><p><strong>filename</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><em>None</em>) – file to be created. If None, write to sys.stdout</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>use</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a><em> | </em><em>None</em>) – name of the created SEQUENCE of LINE.
Default: name of the PyAT lattice</p></li>
<li><p><strong>use_line</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><em>bool</em></a>) – If True, use a MAD “LINE” format. Otherwise, use
a MAD “SEQUENCE”</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../howto/Collective.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Collective</p>
      </div>
    </a>
    <a class="right-next"
       href="at.lattice.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">at.lattice</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#using-mad-x-files-with-pyat">Using MAD-X files with PyAT</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#translation-losses">1. Translation losses</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#d-motion">6-D motion</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#combined-function-magnets">Combined function magnets</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#multipoles">Multipoles</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#mad-elements-absent-from-at">MAD elements absent from AT</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#incompatible-attributes">Incompatible attributes</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#reading-mad-x-files">2. Reading MAD-X files</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#short-way">Short way</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#detailed-way">Detailed way</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exporting-to-mad-x-files">3. Exporting to MAD-X files</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#functions-and-classes">4. Functions and classes</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#at.load.madx.MadParameter"><code class="docutils literal notranslate"><span class="pre">MadParameter</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#at.load.madx.MadParameter.evaluate"><code class="docutils literal notranslate"><span class="pre">MadParameter.evaluate()</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#at.load.madx.MadxParser"><code class="docutils literal notranslate"><span class="pre">MadxParser</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#at.load.madx.MadxParser.clear"><code class="docutils literal notranslate"><span class="pre">MadxParser.clear()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#at.load.madx.MadxParser.evaluate"><code class="docutils literal notranslate"><span class="pre">MadxParser.evaluate()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#at.load.madx.MadxParser.expand"><code class="docutils literal notranslate"><span class="pre">MadxParser.expand()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#at.load.madx.MadxParser.lattice"><code class="docutils literal notranslate"><span class="pre">MadxParser.lattice()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#at.load.madx.MadxParser.parse_files"><code class="docutils literal notranslate"><span class="pre">MadxParser.parse_files()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#at.load.madx.MadxParser.parse_lines"><code class="docutils literal notranslate"><span class="pre">MadxParser.parse_lines()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#at.load.madx.MadxParser.ignored"><code class="docutils literal notranslate"><span class="pre">MadxParser.ignored</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#at.load.madx.MadxParser.missing"><code class="docutils literal notranslate"><span class="pre">MadxParser.missing</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#at.load.madx.MadxParser.sequences"><code class="docutils literal notranslate"><span class="pre">MadxParser.sequences</span></code></a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#at.load.madx.load_madx"><code class="docutils literal notranslate"><span class="pre">load_madx()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#at.load.madx.save_madx"><code class="docutils literal notranslate"><span class="pre">save_madx()</span></code></a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549"></script>
<script defer src="../../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2022, ATCollab.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.4.7.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.0.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>